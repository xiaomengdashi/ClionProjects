<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ËßÜÈ¢ëËÅäÂ§©ÂÆ§</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <!-- ÁôªÂΩïÁïåÈù¢ -->
        <div id="loginPanel" class="panel">
            <h1>ËßÜÈ¢ëËÅäÂ§©ÂÆ§</h1>
            <div class="login-form">
                <input type="text" id="roomIdInput" placeholder="ËØ∑ËæìÂÖ•ÊàøÈó¥Âè∑" maxlength="10">
                <button id="joinButton" onclick="joinRoom()">Âä†ÂÖ•ÊàøÈó¥</button>
            </div>
        </div>

        <!-- ËßÜÈ¢ëËÅäÂ§©ÁïåÈù¢ -->
        <div id="chatPanel" class="panel" style="display: none;">
            <div class="header">
                <h2>ÊàøÈó¥Âè∑: <span id="currentRoomId"></span></h2>
                <div class="user-info">
                    <span id="currentUserName"></span>
                    <button onclick="leaveRoom()" class="leave-btn">Á¶ªÂºÄÊàøÈó¥</button>
                </div>
            </div>

            <div class="main-content">
                <!-- ËßÜÈ¢ëÂå∫Âüü -->
                <div class="video-area">
                    <!-- ÂÖ®Â±èËßÜÈ¢ëÊòæÁ§∫Âå∫ -->
                    <div class="fullscreen-video-container" id="fullscreenVideoContainer" style="display: none;">
                        <div class="fullscreen-video-wrapper">
                            <video id="fullscreenVideo" autoplay playsinline></video>
                            <div class="fullscreen-controls">
                                <button class="fullscreen-close" onclick="exitFullscreenVideo()">
                                    <span class="icon">‚úï</span>
                                </button>
                                <div class="fullscreen-label" id="fullscreenLabel">Áî®Êà∑Âêç</div>
                            </div>
                        </div>
                    </div>

                    <!-- ÊôÆÈÄöËßÜÈ¢ëÁΩëÊ†º -->
                    <div class="video-container" id="videoContainer">
                        <!-- Êú¨Âú∞ËßÜÈ¢ë -->
                        <div class="video-wrapper local-video-wrapper">
                            <video id="localVideo" autoplay muted playsinline></video>
                            <div class="video-label">Êàë</div>
                            <div class="video-controls">
                                <button class="expand-btn" onclick="expandVideo('localVideo', 'Êàë')" title="ÊîæÂ§ßËßÜÈ¢ë">
                                    <span class="icon">üîç</span>
                                </button>
                                <button id="muteButton" onclick="toggleMute()">
                                    <span class="icon">üé§</span>
                                </button>
                                <button id="cameraButton" onclick="toggleCamera()">
                                    <span class="icon">üì∑</span>
                                </button>
                            </div>
                        </div>

                        <!-- ËøúÁ®ãËßÜÈ¢ëÂÆπÂô® -->
                        <div id="remoteVideos" class="remote-videos">
                            <!-- Âä®ÊÄÅÊ∑ªÂä†ËøúÁ®ãËßÜÈ¢ë -->
                        </div>
                    </div>
                </div>

                <!-- ËÅäÂ§©ÂíåÁî®Êà∑ÂàóË°®Âå∫Âüü -->
                <div class="sidebar">
                    <!-- Áî®Êà∑ÂàóË°® -->
                    <div class="user-list">
                        <h3>Âú®Á∫øÁî®Êà∑ <span class="user-count" id="userCount">0</span></h3>
                        <ul id="userList"></ul>
                    </div>
                    
                    <!-- ËÅäÂ§©Âå∫Âüü -->
                    <div class="chat-area">
                        <div class="chat-header">
                            <h3>ËÅäÂ§©ÂÆ§</h3>
                            <div class="chat-tabs">
                                <button class="tab-button active" onclick="switchTab('messages')">Ê∂àÊÅØ</button>
                                <button class="tab-button" onclick="switchTab('files')">Êñá‰ª∂</button>
                            </div>
                        </div>
                        
                        <!-- Ê∂àÊÅØÊ†áÁ≠æÈ°µ -->
                        <div class="tab-content" id="messagesTab">
                            <div class="chat-messages" id="chatMessages">
                                <!-- Ê∂àÊÅØÂàóË°® -->
                            </div>
                            
                            <div class="typing-indicator" id="typingIndicator" style="display: none;">
                                <span></span>
                            </div>
                            
                            <div class="chat-input">
                                <input type="text" id="messageInput" placeholder="ËæìÂÖ•Ê∂àÊÅØ..." maxlength="500">
                                <button id="fileUploadButton" onclick="triggerFileUpload()" title="‰∏ä‰º†Êñá‰ª∂">üìé</button>
                                <button id="sendButton" onclick="sendMessage()">ÂèëÈÄÅ</button>
                            </div>
                        </div>
                        
                        <!-- Êñá‰ª∂Ê†áÁ≠æÈ°µ -->
                        <div class="tab-content" id="filesTab" style="display: none;">
                            <div class="file-upload-area">
                                <div class="upload-zone" id="uploadZone" ondrop="handleDrop(event)" ondragover="handleDragOver(event)">
                                    <div class="upload-icon">üìÅ</div>
                                    <div class="upload-text">
                                        <p>ÊãñÊãΩÊñá‰ª∂Âà∞Ê≠§Â§ÑÊàñ</p>
                                        <button onclick="triggerFileUpload()">ÈÄâÊã©Êñá‰ª∂</button>
                                    </div>
                                    <div class="upload-limit">ÊúÄÂ§ß10MBÔºåÊîØÊåÅÂ∏∏ËßÅÊñá‰ª∂Ê†ºÂºè</div>
                                </div>
                                <input type="file" id="fileInput" style="display: none;" onchange="handleFileSelect(event)" multiple>
                            </div>
                            
                            <div class="file-list" id="fileList">
                                <div class="file-list-header">ÊàøÈó¥Êñá‰ª∂</div>
                                <div class="file-items" id="fileItems">
                                    <!-- Êñá‰ª∂ÂàóË°® -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ‰∏ä‰º†ËøõÂ∫¶ÂØπËØùÊ°Ü -->
    <div class="upload-progress" id="uploadProgress">
        <div class="progress-text">Ê≠£Âú®‰∏ä‰º†Êñá‰ª∂...</div>
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>
        <div class="progress-percentage" id="progressPercentage">0%</div>
    </div>

    <script src="js/webrtc.js"></script>
    <script src="js/app.js"></script>
    <script>
        // ÂÖ®Â±ÄËßÜÈ¢ëÊîæÂ§ßÂäüËÉΩ
        function expandVideo(videoId, userName) {
            if (typeof window.chatApp !== 'undefined' && window.chatApp.expandVideo) {
                window.chatApp.expandVideo(videoId, userName);
            }
        }
        
        function exitFullscreenVideo() {
            if (typeof window.chatApp !== 'undefined' && window.chatApp.exitFullscreenVideo) {
                window.chatApp.exitFullscreenVideo();
            }
        }
        
        function switchTab(tabName) {
            if (typeof window.chatApp !== 'undefined' && window.chatApp.switchTab) {
                window.chatApp.switchTab(tabName);
            }
        }
    </script>
</body>
</html> 