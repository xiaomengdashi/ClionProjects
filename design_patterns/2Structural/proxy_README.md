# Proxy Pattern（代理模式）

## 概述
代理模式是一种结构型设计模式，让你能够提供对象的替代品或其占位符。代理控制着对于原对象的访问，并允许在将请求提交给对象前后进行一些处理。代理模式为另一个对象提供一个替身或占位符以控制对这个对象的访问。

## 意图
- 为其他对象提供一种代理以控制对这个对象的访问
- 在某些情况下，一个客户不想或者不能够直接引用一个对象，而代理对象可以在客户端和目标对象之间起到中介的作用

## 结构
1. **Subject（抽象主题）**：定义了RealSubject和Proxy的共用接口
2. **RealSubject（真实主题）**：定义了代理所代表的真实实体
3. **Proxy（代理）**：保存一个引用使得代理可以访问实体，并提供一个与Subject的接口相同的接口

## 代理类型
- **虚拟代理**：根据需要创建开销很大的对象
- **远程代理**：为一个对象在不同的地址空间提供局部代表
- **保护代理**：控制对原始对象的访问
- **智能引用**：取代了简单的指针，它在访问对象时执行一些附加操作

## 适用场景
- 远程代理：为一个位于不同的地址空间的对象提供一个本地的代理对象
- 虚拟代理：如果需要创建一个资源消耗较大的对象，先创建一个消耗相对较小的对象来表示
- 保护代理：控制对一个对象的访问，可以给不同的用户提供不同级别的使用权限
- 智能指引：当调用真实的对象时，代理处理另外一些事

## 优点
- 代理模式在客户端与目标对象之间起到一个中介作用和保护目标对象的作用
- 代理对象可以扩展目标对象的功能
- 代理模式能将客户端与目标对象分离，在一定程度上降低了系统的耦合度

## 缺点
- 代理模式会造成系统设计中类的数量增加
- 在客户端和目标对象之间增加一个代理对象，会造成请求处理速度变慢
- 增加了系统的复杂度

## 编译和运行
```bash
g++ -std=c++14 proxy.cpp -o proxy
./proxy
```

## 示例输出
```
=== Proxy Pattern Demo ===
Client: Executing the client code with a real subject:
RealSubject: Handling request.

Client: Executing the same client code with a proxy:
Proxy: Checking access prior to firing a real request.
RealSubject: Handling request.
Proxy: Logging the time of request.
```